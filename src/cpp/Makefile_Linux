# needs gcc-4.7 or later
CC := g++
ARCH := 64
LIB_DIR = ../../library/linux$(ARCH)/
LIBRARY = libMethClaInterface.so

.PHONY: clean install

$(LIBRARY):
	$(CC) -m$(ARCH) -fPIC -I$(JAVA_INCLUDES)/linux -I./include -I$(JAVA_HOME)/include -std=c++11 -g -c processing_sound_MethClaInterface.cpp
	$(CC) -m$(ARCH) -shared -L$(LIB_DIR) -Wl,-rpath,'$$ORIGIN' -o $@ *.o -lmethcla

clean:
	rm *.o
	rm *.jnilib

install: $(LIBRARY)
	cp $< $(LIB_DIR)
